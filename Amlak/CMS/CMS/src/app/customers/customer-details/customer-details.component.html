<div *ngIf="mainLoader" class="full-width flex-center p-4">
    <mat-spinner [diameter]="50"></mat-spinner>
</div>

<ng-container *ngIf="!mainLoader">
    <form (ngSubmit)="onSaveChanges()" [formGroup]="customerForm">
        <h3 class="header-title" *ngIf="customerId === 0">ساخت حساب جدید مشتری</h3>
        <h3 class="header-title" *ngIf="customerId !== 0">ویرایش حساب مشتری</h3>

        <div class="row px-4">
            <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12">

                <mat-form-field appearance="fill">
                    <mat-label>نام کامل</mat-label>
                    <input matInput required [formControl]="fullName">
                </mat-form-field>

            </div>
            <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12">

                <mat-form-field appearance="fill">
                    <mat-label>شماره همراه</mat-label>
                    <input matInput required [formControl]="phoneNumber">
                </mat-form-field>

            </div>
            <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12">

                <mat-form-field appearance="fill">
                    <mat-label>نوع مشتری</mat-label>
                    <mat-select [formControl]="customerType">
                        <mat-option [value]="1">
                            {{ helper.customerTypeView(1) }}
                        </mat-option>
                        <mat-option [value]="2">
                            {{ helper.customerTypeView(2) }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

            </div>
            <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12">

                <mat-form-field appearance="fill">
                    <mat-label>نوع قرارداد</mat-label>
                    <mat-select [formControl]="contractType">
                        <mat-option [value]="1">
                            {{ helper.contractTypeView(1) }}
                        </mat-option>
                        <mat-option [value]="2">
                            {{ helper.contractTypeView(2) }}
                        </mat-option>
                        <mat-option [value]="3">
                            {{ helper.contractTypeView(3) }}
                        </mat-option>
                        <mat-option [value]="4">
                            {{ helper.contractTypeView(4) }}
                        </mat-option>
                        <mat-option [value]="5">
                            {{ helper.contractTypeView(5) }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

            </div>
            <div class="col-12">

                <mat-form-field style="width: 100%;" appearance="fill">
                    <mat-label>آدرس مشتری</mat-label>
                    <textarea matInput required [formControl]="address" placeholder="..." [rows]="5"></textarea>
                </mat-form-field>

            </div>
            <div class="col-12">

                <mat-checkbox color="primary" [formControl]="activate">فعال بودن حساب
                </mat-checkbox>

            </div>
            <mat-divider class="section-sep"></mat-divider>
            <div class="col-12 mt-4">

                <button type="submit" mat-flat-button color="primary" [disabled]="!customerForm.valid || loadUpdate">
                    <div class="flex-center">
                        <mat-spinner *ngIf="loadUpdate" [diameter]="20"></mat-spinner>
                        <span>ثبت تغییرات</span>
                    </div>
                </button>

            </div>
        </div>
    </form>
</ng-container>